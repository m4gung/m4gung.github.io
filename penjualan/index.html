<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Aplikasi Penjualan</title>

<!-- Bootstrap 5 (CSS + Bundle JS will be loaded in head/body) -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- SheetJS (import/export Excel) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

<!-- Chart.js (for chart laporan) -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css">
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>

<style>
  body { padding:20px; }
  .small { font-size: 0.85rem; }
  .card { margin-bottom: 18px; }
  .modal-backdrop.show { opacity:0.25; }
</style>
</head>
<body>

<div class="container">

  <h2 class="mb-4">Aplikasi Penjualan</h2>


  

<!-- (lanjutan: POS, Transaksi, Modal, Report, dan script di Bagian 2) -->
<!-- ======================= -->
<!-- POS : CART MULTI PRODUK -->
<!-- ======================= -->
<div class="card">
  <div class="card-header">Transaksi (POS)</div>
  <div class="card-body">

    <div class="row g-2">
      <div class="col-md-3">
        <input id="pembeli_cart" class="form-control" placeholder="Nama Pembeli">
      </div>
      <div class="col-md-3">
        <select id="pilih_produk_cart" class="form-select"></select>
      </div>
      <div class="col-md-2">
        <input id="harga_cart" class="form-control" type="number" placeholder="Harga Jual / pcs">
      </div>
      <div class="col-md-2">
        <input id="qty_cart" class="form-control" type="number" placeholder="Qty">
      </div>
      <div class="col-md-2 d-grid">
        <button id="btnAddCart" class="btn btn-primary">Tambah</button>
      </div>
    </div>

    <div class="table-responsive mt-3">
      <table class="table table-bordered table-sm">
        <thead class="table-light">
          <tr>
            <th>#</th>
            <th>Produk</th>
            <th>Harga</th>
            <th>Qty</th>
            <th>Total</th>
            <th>Aksi</th>
          </tr>
        </thead>
        <tbody id="tabelCart"></tbody>
      </table>
    </div>

    <!-- PAYMENT AREA -->
    <div class="row g-2 mt-3">
      <div class="col-md-3">
        <select id="status_bayar_cart" class="form-select">
          <option value="Lunas">Lunas</option>
          <option value="Belum Lunas">Belum Lunas</option>
        </select>
      </div>

      <div class="col-md-3">
        <select id="metode_bayar_cart" class="form-select">
          <option value="Tunai">Tunai</option>
          <option value="Transfer">Transfer</option>
        </select>
      </div>

      <div class="col-md-3 d-flex align-items-center">
        <b>Subtotal: <span id="cartSubtotal">Rp 0,00</span></b>
      </div>

      <div class="col-md-3 d-grid">
        <button id="btnSaveCart" class="btn btn-success">Simpan Transaksi</button>
      </div>
    </div>

  </div>
</div>



<!-- ======================= -->
<!-- DAFTAR TRANSAKSI -->
<!-- ======================= -->
<div class="card">
	
  <div class="card-header">
		<div class="row g-2 align-items-center">
				<div class="col-md-9">Daftar Transaksi</div>
	
		<button class="btn btn-secondary btn-sm col-md-3" data-bs-toggle="collapse" data-bs-target="#collapseTransaksi">Show/Hide Transaksi</button>
		</div>			
	</div>
	
	<div id="collapseTransaksi" class="collapse show">

			<div class="card-body">
		    <div class="table-responsive">
      <table id="tableTransaksiDT" class="table table-bordered table-sm">
        <thead class="table-light">
          <tr>
						<th>No</th>
            <th>Pembeli</th>
            <th>Produk</th>
            <th>Modal/pcs</th>
            <th>Jual/pcs</th>
            <th>Qty</th>
            <th>Total Modal</th>
            <th>Total Jual</th>
            <th>Laba</th>
            <th>Status</th>
            <th>Metode</th>
            <th>Tanggal</th>
            <th>Aksi</th>
          </tr>
        </thead>
        <tbody id="tabelTransaksi"></tbody>
      </table>
		</div>
		<hr>
		 <div class="row g-2">
      <div class="col-md-4">
        <input id="importTransaksi" type="file" class="form-control" accept=".xlsx,.xls">
      </div>

      <div class="col-md-3 d-grid">
        <button id="btnImportTransaksi" class="btn btn-primary">Import</button>
      </div>

      <div class="col-md-3 d-grid">
        <button id="btnExportTransaksi" class="btn btn-success">Export</button>
      </div>
    		</div>	  		
	</div>

  </div>
</div>

<!-- ======================= -->
  <!-- MASTER PRODUK -->
  <!-- ======================= -->
  <div class="card" id="cardProduk">	

	<div class="card-header">
	 <div class="row g-2 align-items-center">
 		<div class="col-md-9"> Master Produk</div>

		<button class="btn btn-secondary btn-sm col-md-3" data-bs-toggle="collapse" data-bs-target="#collapseProduk">
  Show/Hide Produk
</button>
		</div>
	</div>
<div id="collapseProduk" class="collapse show">  
    
    <div class="card-body">

      <div class="row g-2 align-items-center">
        <div class="col-md-2">
          <input id="id_produk" class="form-control" placeholder="ID Produk">
        </div>
        <div class="col-md-3">
          <input id="nama_produk" class="form-control" placeholder="Nama Produk">
        </div>
        <div class="col-md-2">
          <input id="modal_total" class="form-control" type="number" placeholder="Modal Total">
        </div>
        <div class="col-md-2">
          <input id="stok_produk" class="form-control" type="number" placeholder="Stok (boleh 0)">
        </div>
        <div class="col-md-2">
          <input id="harga_jual_satuan" class="form-control" type="number" placeholder="Harga Jual / pcs">
        </div>
        <div class="col-md-1 d-grid">
          <button id="btnSimpanProduk" class="btn btn-primary">Simpan</button>
        </div>
      </div>

      

      <hr>

      <div class="table-responsive">
        <table id="tableProdukDT" class="table table-bordered table-sm">
          <thead class="table-light">
            <tr>
              <th>ID</th>
              <th>Nama</th>
              <th>Modal Total</th>
              <th>Modal/pcs</th>
              <th>Stok</th>
              <th>Harga Jual</th>
              <th>Aksi</th>
            </tr>
          </thead>
          <tbody id="tabelProduk">
            <!-- akan diisi oleh JS -->
          </tbody>
        </table>
      </div>
			<hr>
			<div class="row g-2 mt-3">
        <div class="col-md-4">
          <input id="importProduk" type="file" class="form-control" accept=".xlsx,.xls">
        </div>
			  <div class="col-md-3 d-grid">
         <button id="btnImportProduk" class="btn btn-primary">Import Produk</button></div>	
        <div class="col-md-3 d-grid">
          <button id="btnExportProduk" class="btn btn-success">Export Produk</button>
        </div>
      </div>

    </div>
  </div>
</div>

<!-- ======================= -->
<!-- MODAL EDIT TRANSAKSI -->
<!-- ======================= -->
<div class="modal fade" id="editModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">

      <div class="modal-header">
        <h5 class="modal-title">Edit Transaksi</h5>
        <button class="btn-close" data-bs-dismiss="modal"></button>
      </div>

      <div class="modal-body">

        <label>Pembeli</label>
        <input id="modal_pembeli" class="form-control mb-2">

        <label>Produk</label>
        <input id="modal_produk" class="form-control mb-2" readonly>

        <label>Harga Jual</label>
        <input id="modal_harga" class="form-control mb-2" type="number">

        <label>Qty</label>
        <input id="modal_qty" class="form-control mb-2" type="number">

        <label>Status Pembayaran</label>
        <select id="modal_status" class="form-select mb-2">
          <option value="Lunas">Lunas</option>
          <option value="Belum Lunas">Belum Lunas</option>
        </select>

        <label>Metode Pembayaran</label>
        <select id="modal_metode" class="form-select mb-2">
          <option value="Tunai">Tunai</option>
          <option value="Transfer">Transfer</option>
        </select>

      </div>

      <div class="modal-footer">
        <button class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
        <button id="modalSave" class="btn btn-primary">Simpan</button>
      </div>

    </div>
  </div>
</div>





<!-- ======================= -->
<!-- REPORT + CHART -->
<!-- ======================= -->
<div class="card">
  <div class="card-header">Report Penjualan</div>
  <div class="card-body">

    <div class="row g-2 mb-3">
      <div class="col-md-3">
        <input id="filter_mulai" type="date" class="form-control">
      </div>

      <div class="col-md-3">
        <input id="filter_akhir" type="date" class="form-control">
      </div>

      <div class="col-md-3">
        <select id="filter_produk" class="form-select"></select>
      </div>

      <div class="col-md-3 d-grid">
        <button id="btnFilter" class="btn btn-primary">Terapkan Filter</button>
      </div>
    </div>

    <div class="row g-2 mb-3">
      <div class="col-md-3"><b>Total Modal:</b> <span id="totalModal">Rp 0,00</span></div>
      <div class="col-md-3"><b>Total Omzet:</b> <span id="totalOmzet">Rp 0,00</span></div>
      <div class="col-md-3"><b>Total Laba:</b> <span id="totalLaba">Rp 0,00</span></div>

      <div class="col-md-3 d-grid">
        <button id="btnResetFilter" class="btn btn-secondary">Reset</button>
      </div>
    </div>

    <canvas id="chartLaporan" height="120"></canvas>

  </div>
</div>






<!-- Bootstrap Bundle JS (includes Popper) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<!-- LOAD app.js -->
<script src="app.js"></script>
<script>


	$(document).ready(function () {
    $('#tableProdukDT').DataTable({
        pageLength: 10
    });

    $('#tableTransaksiDT').DataTable({
        pageLength: 10
    });
	});

</script>
</div> <!-- /container -->
</body>
</html>