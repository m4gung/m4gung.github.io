<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Perhitungan Hasil Panen</title>
 <style>
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 12px;
    background: #f4f4f4;
  }
  .container {
    background: white;k
    padding: 18px;
    border-radius: 10px;
    width: 100%;
    box-sizing: border-box;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
  }
  h2 {
    text-align: center;
    margin-bottom: 20px;
    font-size: 22px;
  }
  label {
    display: block;
    margin-top: 12px;
    font-weight: bold;
    font-size: 16px;
  }
  input {
    width: 100%;
    padding: 12px;
    margin-top: 6px;
    border: 1px solid #ccc;
    border-radius: 6px;
    box-sizing: border-box;
    font-size: 16px;
  }
  button {
    margin-top: 18px;
    width: 100%;
    padding: 14px;
    border: none;
    background: #007bff;
    color: white;
    font-size: 18px;
    cursor: pointer;
    border-radius: 6px;
  }
  button:hover {
    background: #0056b3;
  }
  .result-box {
    margin-top: 18px;
    padding: 14px;
    background: #e9f7ef;
    border: 1px solid #a4d4ae;
    border-radius: 6px;
    white-space: pre-wrap;
    font-size: 16px;
  }
  .copy-btn {
    background: #28a745;
  }
  .copy-btn:hover {
    background: #1e7e34;
  }

  @media (max-width: 1000px) {
    h2 {
      font-size: 50px;
    }
    label {
      font-size: 50px;
    }
    input {
      font-size: 50px;
      padding: 20px;
    }
    button {
      font-size: 50px;
      padding: 13px;
    }
		.result-box {
			font-size: 40px;
		}
  }
	</style>
</head>
<body>
  <div class="container">
    <h2>Perhitungan Hasil Panen</h2>

    <label>Nama Petani:</label>
    <input type="text" id="namaPetani">

    <label>Konversi 1 K (Karung) = ... B (Be'lle):</label>
    <input type="number" id="konversiKarung" value="10">

    <label>Jumlah Karung Panen:</label>
    <input type="number" id="karungPanen" value="0">

    <label>Alat:</label>
    <input type="number" id="alat" value="0">

    <label>Jumlah Pupuk yang Digunakan:</label>
    <input type="number" id="jumlahPupuk" value="0">

    <label>1 Pupuk = ... Be'lle:</label>
    <input type="number" id="konversiPupuk" value="5">

    <label>Mentri & Irigasi (%):</label>
    <input type="number" id="operasionalPersen" value="0.0">  
		
		<label>Pompa (%):</label>
    <input type="number" id="opPompa" value="20">			
												
    <button onclick="hitungHasil()">Hitung</button>

    <div id="hasil" class="result-box" style="display:none;"></div>
    <button id="copyBtn" class="copy-btn" style="display:none;" onclick="copyHasil()">Copy Hasil</button>
  </div>

  <script>
    function hitungHasil() {
      const nama = document.getElementById('namaPetani').value || '-';
      const konvKarung = parseFloat(document.getElementById('konversiKarung').value) || 0;
      const karungPanen = parseFloat(document.getElementById('karungPanen').value) || 0;
      const alat = parseFloat(document.getElementById('alat').value) || 0;
      const jumlahPupuk = parseFloat(document.getElementById('jumlahPupuk').value) || 0;
      const konvPupuk = parseFloat(document.getElementById('konversiPupuk').value) || 0;
      const opPersen = parseFloat(document.getElementById('operasionalPersen').value) || 0;
			const opPompa = parseFloat(document.getElementById('opPompa').value) || 0;
			
      // Total Ember Awal
      let totalEmber = (karungPanen - alat) * konvKarung;

      // Potongan Pupuk
      let emberPupuk = jumlahPupuk * konvPupuk;
      let sisaEmber1 = totalEmber - emberPupuk;
      if (sisaEmber1 < 0) sisaEmber1 = 0;

      // Potongan Operasional
      let emberOperasional = sisaEmber1 * (opPersen / 100);
			emberOperasional = bulatBelle(emberOperasional);
      let sisaEmber2 = sisaEmber1 - emberOperasional;
      if (sisaEmber2 < 0) sisaEmber2 = 0;

      // Potongan Pompa 20% dari sisa setelah operasional
      let emberPompa = sisaEmber2 * (opPompa/100);
      emberPompa = bulatBelle(emberPompa);			
      let emberBersih = sisaEmber2 - emberPompa;
      if (emberBersih < 0) emberBersih = 0;
			
			// Hasil Bersih Pompa
			let hasilBersihPompa = emberPompa + emberPupuk +emberOperasional;

      function konversiKeKarung(ember) {
        let karung = (ember / konvKarung);
        let sisa = ember % konvKarung;
        return karung + " K ";
      }
						
			function bulatBelle(belle) {
  				return belle;//Math.round(belle); // bulatkan ke atas 3 desimal
			}

      const hasilText = 
        "Nama Petani: " + nama + "\n" +
        "Total Panen: " + karungPanen + " K "  + " \n" +
				"Alat: " + alat + " K \n" +
        "Pupuk: " + emberPupuk + " B\n" +
        "Mentri & Irigasi (" + opPersen + "% dari "+sisaEmber1+" B): " + emberOperasional + " B \n" +
        "Pompa ("+opPompa+"% dari "+sisaEmber2+" B): " + emberPompa + " B\n\n" +
        
				"*Hasil Bersih Pompa:* " + hasilBersihPompa +" B = " + konversiKeKarung(hasilBersihPompa) + "\n\n K=Karung, B=Be'lle";

      const hasilDiv = document.getElementById('hasil');
      hasilDiv.style.display = 'block';
      hasilDiv.textContent = hasilText;

      document.getElementById('copyBtn').style.display = 'block';
    }

    function copyHasil() {
      const hasilText = document.getElementById('hasil').textContent;
      navigator.clipboard.writeText(hasilText).then(() => {
        alert('Hasil berhasil disalin!');
      });
    }
  </script>
</body>
</html>