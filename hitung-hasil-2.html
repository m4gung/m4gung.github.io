<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Kalkulator Hasil Panen</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background: #f4f4f4;
    }
    .container {
      background: white;
      padding: 20px;
      border-radius: 8px;
      max-width: 500px;
      margin: auto;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    h2 {
      text-align: center;
      margin-bottom: 20px;
    }
    label {
      display: block;
      margin-top: 12px;
      font-weight: bold;
    }
    input {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    button {
      margin-top: 15px;
      width: 100%;
      padding: 10px;
      border: none;
      background: #007bff;
      color: white;
      font-size: 16px;
      cursor: pointer;
      border-radius: 4px;
    }
    button:hover {
      background: #0056b3;
    }
    .result-box {
      margin-top: 20px;
      padding: 15px;
      background: #e9f7ef;
      border: 1px solid #a4d4ae;
      border-radius: 4px;
      white-space: pre-wrap;
    }
    .copy-btn {
      background: #28a745;
    }
    .copy-btn:hover {
      background: #1e7e34;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>Kalkulator Hasil Panen</h2>

    <label>Nama Petani:</label>
    <input type="text" id="namaPetani">

    <label>Konversi 1 Karung = ... Ember:</label>
    <input type="number" id="konversiKarung" value="5">

    <label>Jumlah Karung Panen:</label>
    <input type="number" id="karungPanen" value="0">

    <label>Tambahan Ember:</label>
    <input type="number" id="emberTambahan" value="0">

    <label>Jumlah Pupuk yang Digunakan:</label>
    <input type="number" id="jumlahPupuk" value="0">

    <label>1 Pupuk = ... Ember:</label>
    <input type="number" id="konversiPupuk" value="0">

    <label>Operasional (%):</label>
    <input type="number" id="operasionalPersen" value="0">

    <button onclick="hitungHasil()">Hitung</button>

    <div id="hasil" class="result-box" style="display:none;"></div>
    <button id="copyBtn" class="copy-btn" style="display:none;" onclick="copyHasil()">Copy Hasil</button>
  </div>

  <script>
    function hitungHasil() {
      const nama = document.getElementById('namaPetani').value || '-';
      const konvKarung = parseFloat(document.getElementById('konversiKarung').value);
      const karungPanen = parseFloat(document.getElementById('karungPanen').value);
      const emberTambahan = parseFloat(document.getElementById('emberTambahan').value);
      const jumlahPupuk = parseFloat(document.getElementById('jumlahPupuk').value);
      const konvPupuk = parseFloat(document.getElementById('konversiPupuk').value);
      const opPersen = parseFloat(document.getElementById('operasionalPersen').value);

      // Total Ember Awal
      let totalEmber = (karungPanen * konvKarung) + emberTambahan;

      // Potongan Pupuk
      let emberPupuk = jumlahPupuk * konvPupuk;
      let sisaEmber1 = totalEmber - emberPupuk;
      if (sisaEmber1 < 0) sisaEmber1 = 0;

      // Potongan Operasional
      let emberOperasional = sisaEmber1 * (opPersen / 100);
      let sisaEmber2 = sisaEmber1 - emberOperasional;
      if (sisaEmber2 < 0) sisaEmber2 = 0;

      // Potongan Pompa 20% dari sisa setelah operasional
      let emberPompa = sisaEmber2 * 0.20;
      let emberBersih = sisaEmber2 - emberPompa;
      if (emberBersih < 0) emberBersih = 0;

      function konversiKeKarung(ember) {
        let karung = Math.floor(ember / konvKarung);
        let sisa = ember % konvKarung;
        return karung + " karung " + sisa + " ember";
      }

      const hasilText = 
        "Nama Petani: " + nama + "\n" +
        "Total Panen: " + karungPanen + " karung + " + emberTambahan + " ember\n" +
        "Total Ember: " + totalEmber + "\n" +
        "Pupuk: " + emberPupuk + " ember\n" +
        "Sisa Setelah Pupuk: " + sisaEmber1 + " ember\n" +
        "Operasional (" + opPersen + "%): " + konversiKeKarung(emberOperasional) + "\n" +
        "Sisa Setelah Operasional: " + sisaEmber2 + " ember\n" +
        "Pompa (20% dari sisa): " + konversiKeKarung(emberPompa) + "\n" +
        "Hasil Bersih: " + konversiKeKarung(emberBersih);

      const hasilDiv = document.getElementById('hasil');
      hasilDiv.style.display = 'block';
      hasilDiv.textContent = hasilText;

      document.getElementById('copyBtn').style.display = 'block';
    }

    function copyHasil() {
      const hasilText = document.getElementById('hasil').textContent;
      navigator.clipboard.writeText(hasilText).then(() => {
        alert('Hasil berhasil disalin!');
      });
    }
  </script>
</body>
</html>

